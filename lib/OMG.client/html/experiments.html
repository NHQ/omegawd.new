<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
</html>
<head>
  <meta name="google" value="notranslate">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<script type='text/javascript' src='../../../lib/Sequence/scripts/jquery.js'></script>
	<script type='text/javascript' src='../../../lib/Sequence/scripts/sequence.jquery.js'></script>
	<style>
	body {
		position:absolute;
		font-family: Helvetica;
		overflow:hidden;
	}
	#boundlessNutshell {
		position:absolute;
		width:100000px;
	}
	#text {
		position:absolute;
		visibility:hidden;
	}
	#article {
		margin: 0 auto;
	}
	</style>
</head>
<body>
	<Div id='sequence'>
		<ul>
			<li>
	<p id='article'>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean. A small river named Duden flows by their place and supplies it with the necessary regelialia. It is a paradisematic country, in which roasted parts of sentences fly into your mouth. Even the all-powerful Pointing has no control about the blind texts — it is an almost unorthographic life. One day however a small line of blind text by the name of Lorem Ipsum decided to leave for the far World of Grammar. The Big Oxmox advised her not to do so, because there were thousands of bad Commas, wild Question Marks and devious Semikoli, b, a large language ocean. A small river named Duden flows by their place and supplies it with the necessary regelialia. It is a paradisematic country, in which roasted parts of sentences fly into your mouth. Even the all-powerful Pointing has no control about the blind texts — it is an almost unorthographic life. One day however a small line of blind text by the name of Lorem Ipsum decided to leave for the far World of Grammar. The Big Oxmox advised her not to do so, because there were thousands of bad Commas, wild Question Marks and devious Semikoli, b, a large language ocean. A small river named Duden flows by their place and supplies it with the necessary regelialia. It is a paradit by the name of Lorem Ipsum decided to leave for the far World of Grammar. The Big Oxmox advised her not to do so, because there were thousands of bad Commas, wild Question Marks and devious Semikoli, b, a large language ocean. A small river named Duden flows by their place and supplies it with the necessary regelialia. It is a paradisematic country, in which roasted parts of sentences fly into your mouth. Even the all-powerful Pointing has no control about the blind texts — it is an almost unorthographic life. One day however a small line sematic country, in which roasted parts of sentences fly into your mouth. Even the all-powerful Pointing has no control about the blind texts — it is an almost unorthographic life. One day however a small line of blind text by the name of Lorem Ipsum decided to leave for the far World of Grammar. The Big Oxmox advised her not to do so, because there were thousands of bad Commas, wild Question Marks and devious Semikoli, but the Little Blind Text didn’t listen. She packed her seven versalia, put her initial into the belt and made herself on the way. When she reached the first hills of the Italic Mountains, she had a last view back on the skyline of her hometown Bookmarksgrove, the headline of Alphabet Village and the subline of her own road, the Line Lane. Pityful a rethoric question ran over her cheek, then she continued her way.</p>
	</li>
	<li>
<p id='article'>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean. A small river named Duden flows by their place and supplies it with the necessary regelialia. It is a paradisematic country, in which roasted parts of sentences fly into your mouth. Even the all-powerful Pointing has no control about the blind texts — it is an almost unorthographic life. One day however a small line of blind text by the name of Lorem Ipsum decided to leave for the far World of Grammar. The Big Oxmox advised her not to do so, because there were thousands of bad Commas, wild Question Marks and devious Semikoli, b, a large language ocean. A small river named Duden flows by their place and supplies it with the necessary regelialia. It is a paradisematic country, in which roasted parts of sentences fly into your mouth. Even the all-powerful Pointing has no control about the blind texts — it is an almost unorthographic life. One day however a small line of blind text by the name of Lorem Ipsum decided to leave for the far World of Grammar. The Big Oxmox advised her not to do so, because there were thousands of bad Commas, wild Question Marks and devious Semikoli, b, a large language ocean. A small river named Duden flows by their place and supplies it with the necessary regelialia. It is a paradit by the name of Lorem Ipsum decided to leave for the far World of Grammar. The Big Oxmox advised her not to do so, because there were thousands of bad Commas, wild Question Marks and devious Semikoli, b, a large language ocean. A small river named Duden flows by their place and supplies it with the necessary regelialia. It is a paradisematic country, in which roasted parts of sentences fly into your mouth. Even the all-powerful Pointing has no control about the blind texts — it is an almost unorthographic life. One day however a small line sematic country, in which roasted parts of sentences fly into your mouth. Even the all-powerful Pointing has no control about the blind texts — it is an almost unorthographic life. One day however a small line of blind text by the name of Lorem Ipsum decided to leave for the far World of Grammar. The Big Oxmox advised her not to do so, because there were thousands of bad Commas, wild Question Marks and devious Semikoli, but the Little Blind Text didn’t listen. She packed her seven versalia, put her initial into the belt and made herself on the way. When she reached the first hills of the Italic Mountains, she had a last view back on the skyline of her hometown Bookmarksgrove, the headline of Alphabet Village and the subline of her own road, the Line Lane. Pityful a rethoric question ran over her cheek, then she continued her way.</p>
</li>
</ul>
</div>

	<div id='boundlessNutshell'>
	  <div id='text'>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean. A small river named Duden flows by their place and supplies it with the necessary regelialia. It is a paradisematic country, in which roasted parts of sentences fly into your mouth. Even the all-powerful Pointing has no control about the blind texts — it is an almost unorthographic life. One day however a small line of blind text by the name of Lorem Ipsum decided to leave for the far World of Grammar. The Big Oxmox advised her not to do so, because there were thousands of bad Commas, wild Question Marks and devious Semikoli, but the Little Blind Text didn’t listen. She packed her seven versalia, put her initial into the belt and made herself on the way. When she reached the first hills of the Italic Mountains, she had a last view back on the skyline of her hometown Bookmarksgrove, the headline of Alphabet Village and the subline of her own road, the Line Lane. Pityful a rethoric question ran over her cheek, then she continued her way.</div>
	</div>
</body>

<script type='text/javascript'>
window.onload = function(){	
		var winY = window.innerHeight
		,		winX = window.innerWidth
		,		test = document.getElementById('text')
		,		article = document.getElementById('article')
		,		body = document.body
		, 	fontSize = 16
		,		charsPerLine = 80
		;
		
		article.style['font-size'] = fontSize + 'px'
		test.style['font-size'] = fontSize + 'px'		
		body.style['font-size'] = fontSize + 'px'
		
		function getStyle(el, style) {
		  if(!document.getElementById) return;

		   var value = el.style[toCamelCase(style)];

		  if(!value)
		    if(document.defaultView)
		      value = document.defaultView.
		         getComputedStyle(el, "").getPropertyValue(style);

		    else if(el.currentStyle)
		      value = el.currentStyle[toCamelCase(style)];

		   return value;
		}

		function setStyle(objId, style, value) {
		  document.getElementById(objId).style[style] = value;
		}

		function toCamelCase( sInput ) {
		  var oStringList = sInput.split('-');
		  if(oStringList.length == 1)  
		    return oStringList[0];
		  var ret = sInput.indexOf("-") == 0 ? 
		      oStringList[0].charAt(0).toUpperCase() + oStringList[0].substring(1) : oStringList[0];
		  for(var i = 1, len = oStringList.length; i < len; i++){
		    var s = oStringList[i];
		    ret += s.charAt(0).toUpperCase() + s.substring(1)
		  }
		  return ret;
		}
		
		function testLength(text){
			try {
				test.innerHTML = text.join(' ');				
			}
			catch(err) {
				test.innerHTML = text;
			}
			var currWidth = parseInt(getStyle(test, "width"));

			return currWidth
		}
		
		var currWidth = parseInt(getStyle(test, "width"));
		var spaceWidth = testLength(test.textContent.replace(/[*]/g, ' '))
		var bodyWidth = parseInt(getStyle(document.body, "width"));
		var pixelsPerChar = Math.ceil(currWidth / test.textContent.length);
		var charConst = Math.ceil(fontSize / pixelsPerChar); // font-size / pixelsPerChar
		var widthFactor = charsPerLine / charConst; // CPL / charConst
		var w = charsPerLine * pixelsPerChar * (1 * (fontSize * .1)) // room for innacuracy?
		,		linesPerPage = Math.floor(( .75 * winY ) / Math.floor(18 * 1.62))
		,		charsPerPage = linesPerPage * (w / pixelsPerChar)
		;

		article.style.width = Math.floor(w) + 'px';
		article.style['line-height'] = Math.floor(fontSize * 1.62) + 'px';

//		article.textContent = article.textContent.slice(0, charsPerPage);
		
		var lastLine = (linesPerPage - 1) *  charsPerLine;
		
		var implant = function(lines){
			lines.forEach(testLength)
			var text = lines.join('<br />')
			var p = document.createElement('p'); 
			p.style.width = w + 'px';
			p.innerHTML = text;
			article.style.width = w + 'px';
			article.innerHTML = '';
			article.appendChild(p)
		}
		
		var doLines = function(text){
			var text = text.replace(/\n/g, '')
			,		words = text.split(/\s/)
			,		paragraphs = text.split(/\n/)
			,		lines = []
			,		x = 0
			,		y = 0
			,		c = 0
			;
			
			window.omg = lines
			
			var wordFn = function(words){
								
				if(!words.length) { return implant(lines)} // <--- endpoint
				
				var words = words
				,		word = words.splice(0,1)[0]
				,		l = word.length
				,		lc = l * pixelsPerChar
				,		fullStop = (word.lastIndexOf('.') === l - 1)
				,		ceasura  = (word.lastIndexOf(',') === l - 1)
				;

				if((l + c) <= charsPerLine) { // pixels width
					
					lines[x] ? (lines[x] += word + ' ') : (lines[x] = word + ' ')
					c  += ((l + c) === charsPerLine) ? l : l + 1;
					wordFn(words)
					return
					
				}
					
				else if(l + c > charsPerLine) {
					
					var overage = (l + c) - charsPerLine;
					
					words.unshift(word);
					++x;
					c = 0;
					wordFn(words)
					return						
				
				};
					
			}; 
			
			wordFn(words)			
		
		};
		
	doLines(article.textContent)
}
	
</script>
</html>